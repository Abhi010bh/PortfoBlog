+++
title = 'java8-9'
date = 2024-01-22T20:57:39+05:30
draft = false
+++


## 8:
```java
import java.io.IOException;
import java.sql.*;
import static java.sql.DriverManager.getConnection;
import static java.lang.System.*;

public class TW8 {

    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/edustore";
        String userName = "root";
        String password = "while(know=true)";

        try (Connection conn = DriverManager.getConnection(url, userName, password)) {

            String query = "select * from acadProgress;";
            PreparedStatement stmt = conn.prepareStatement(query);
            ResultSet rs = stmt.executeQuery();
            // Extract data from the result set
            while (rs.next()) {
                // Retrieve by column name
                out.println(rs.getString("USN"));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

```

## 9: 

```java

package com.mycompany.tw9;
import java.io.*;
import static java.lang.System.out;
import java.sql.*;
import static java.sql.DriverManager.*;


/**
 *
 * @author abhib
 */
public class TW9 {
    
    public static void insertTransaction(Connection conn,String BName,String Aname,String Id,float price){
        try{
            String query="insert into BOOKS (Name,Id,Aname,Price) values (?,?,?,?)";
            
        PreparedStatement stmtnt = conn.prepareStatement(query);
        
        stmtnt.setString(1, BName);
        stmtnt.setString(2,Id);
        stmtnt.setString(3,Aname);
        stmtnt.setFloat(4, price);
        
        stmtnt.executeUpdate();
        }
        catch(SQLException e){
        e.printStackTrace();}
    }

    public static void main(String[] args)throws SQLException {
        String url="jdbc:mysql://localhost:3306/lib";
        String username="root";
        String password="while(know=true)";
        try(          
            Connection conn =DriverManager.getConnection(url, username, password)){
                conn.setAutoCommit(false);
                try{
                    Savepoint sp1=conn.setSavepoint();
                    insertTransaction(conn,"BOOK2","AUTH1","BK002",(float)200.50);
                    conn.commit();
                    out.println("Transaction commit successful");
                    
                    Savepoint sp2=conn.setSavepoint();
                    
                    insertTransaction(conn,"BOOK3","AUTH2","BK002",(float)210.50);
                    insertTransaction(conn,"BOOK4","AUTH3","BK003",(float)245.50);
                    conn.rollback(sp2);
                    out.println("RollBack to save point 2");
                    conn.commit();
                    
                    out.println("Transaction commit after roll back");
                    insertTransaction(conn,"BOOK2","AUTH1","BK002",(float)200.50);
                    conn.commit();
                }catch(SQLException e){
                    e.printStackTrace();
                }
        }
        
        catch(SQLException e){
            e.printStackTrace();
        }
    }
}
